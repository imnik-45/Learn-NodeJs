<!DOCTYPE html>
<html lang="en">
    <%- include('./partials/head.ejs') %>
<body>
   
    <%- include('./partials/nav.ejs') %>

    <div class="update-blog content">
        <form action="/blogs/edit/<%=blog._id %>" method="POST">

      <label for="title">Blog title:</label>
      <input type="text" id="title" name="title" value="<%=blog.title %>"  required>
      <label for="snippet">Blog snippet:</label>
      <input type="text" id="snippet" name="snippet" value="<%=blog.snippet %>"  required>
      <label for="body">Blog body:</label>
      <textarea  value="<%=blog.body%>"  name="body"></textarea>
      <a class="update" data-doc="<%=blog._id %>">Submit</a>

        </form>
    </div>
    <%- include('./partials/footer.ejs') %>

    <script>
        const upt = document.querySelector('a.update');

        upt.addEventListener('click', (e) => {
            const endpt = `/blogs/edit/${upt.dataset.doc}`;

            fetch(endpt, {
                    method: 'PUT'
                })
                .then((response) => 
                    response.json())
                    .then((data)=> console.log(data)
                     .catch((err) => {
                    console.log(err);
                })
        })
    </script>
</body>
</html>

